{% extends "base.html" %}
{% load staticfiles %}
{% load emarkdown %}
{% load date %}
{% load interventions %}
{% load topbar %}
{% load thumbnail %}
{% load i18n %}




{% block body_class %}no-sidebar{% endblock %}



{% block pre_content %}
    {% url 'zds.tutorial.views.index' as url_tutorials %}
    {% url 'zds.article.views.index' as url_articles %}
    {% url 'zds.forum.views.index' as url_forums %}
    {% url 'zds.pages.views.association' as url_association %}
    {% if user.is_authenticated %}
        <section class="home-quote home-simple-quote">
            <div class="home-wrapper">
                <img src="{% static "images/clem-home-quote.png" %}" alt="" width="39" height="80">
                <blockquote>
                    «&nbsp;{{ quote }}&nbsp;»
                </blockquote>
            </div>
        </section>
    {% else %}
        <section class="home-quote home-full-description">
            <div class="home-wrapper">
                <img src="{% static "images/clem-home.png" %}" alt="" width="214" height="209">
                <div class="home-full-description-text">
                    <h2>La connaissance pour tous</h2>
                    <p>
                    {% blocktrans with site_name=app.site.litteral_name %}
                        {{site_name}} est un site de partage de connaissances sur lequel vous trouverez des tutoriels de tous niveaux, des articles et des forums d'entraide animés par et pour la communauté.
                    {% endblocktrans %}
                    </p>
                    <a href="#" class="ico-after tutorial label">Découvrir les tutoriels</a>
                    <a href="#" class="ico-after article label">Lire les articles</a>
                    <a href="#" class="ico-after forum label">Echanger sur les forums</a>
                </div>
                <div class="home-full-description-text">
                    <h2>Partagez vos connaissances</h2>
                    <p>
                    {% blocktrans %}
                        Tous les membres peuvent écrire et publier des tutoriels et articles sur le site. Pour assurer la qualité et la pédagogie du contenu, l'équipe du site valide chaque cours avant publication.
                    {% endblocktrans %}
                    </p>
                    <a href="#" class="ico-after tutorial label">Rédiger un nouveau tutoriel</a>
                    <a href="#" class="ico-after article label">Ecrire un nouvel article</a>
                    <a href="#" class="ico-after forum label">Aider les débutants sur les forums</a>
                </div>
                <div class="home-full-description-text">
                    <h2>Gratuit et sans publicité</h2>
                    {% if app.site.association %}
                    <p>
                    {% blocktrans %}
                        Tout cela est entièrement gratuit et garanti sans publicité, le site est géré et financé par une association à but non lucratif.
                    {% endblocktrans %}
                    </p>
                    <a href='{% url "zds.pages.views.association" %}' class="ico-after association label">En savoir plus sur l'association</a>
                    <a href="{{app.site.repository}}" class="ico-after github blue label">Aider à developper la plateforme</a>
                    <a href="{{app.social.twitter}}" class="ico-after twitter blue label">Nous suivre sur Twitter</a>
                    <a href="{{app.social.facebook}}" class="ico-after facebook blue label">Nous aimer sur Facebook</a>
                    {% endif %}
                </div>
            </div>
        </section>
    {% endif %}
    


    <section class="search-box">
        <form action="/rechercher" class="home-wrapper">
            <label for="search-box-field">
                {% trans "Tu cherches quelque chose" %} ?
            </label>
            <input type="text" name="q" placeholder="Exemples : HTML, Java, PHP, Jeux Vidéos, Mathématiques, ..." id="search-box-field">
            <button type="submit" class="ico-after search-submit" title='{% trans "Lancer la recherche" %}'>
                {% trans "OK" %}
            </button>
        </form>
    </section>
{% endblock %}



{% block content_out %}
    {% url 'zds.tutorial.views.index' as url_tutorials %}
    {% url 'zds.article.views.index' as url_articles %}
    {% url 'zds.forum.views.index' as url_forums %}
    <section class="content-col-3 article-list" itemscope itemtype="http://schema.org/ItemList">
        <h2 class="ico-after ico-articles" itemprop="name">
            {% trans "Derniers articles" %}
            <a href="{{url_articles}}">{% trans "Tous les articles" %}</a>
        </h2>
        
        <meta itemprop="itemListOrder" content="Descending">

        {% for article in last_articles %}
            {% include 'tutorial/includes/tutorial_item.part.html' with tutorial=article illu=article.image display_date=True comment_count=article.get_reaction_count %}
        {% endfor %}
    </section>

    <section class="content-col-3 article-list" itemscope itemtype="http://schema.org/ItemList">
        <h2 class="ico-after ico-tutorials" itemprop="name">
            {% trans "Derniers tutoriels" %}
            <a href="{{url_tutorials}}">{% trans "Tous les tutoriels" %}</a>
        </h2>
        
        <meta itemprop="itemListOrder" content="Descending">
        
        {% for tutorial in last_tutorials %}
            {% include 'tutorial/includes/tutorial_item.part.html' with tutorial=tutorial illu=tutorial.image.physical display_date=False comment_count=tutorial.get_note_count %}
        {% endfor %}
    </section>
    <section class="content-col-3 hot-topic-list" itemscope itemtype="http://schema.org/ItemList">
        <h2 class="ico-after hot-topics" itemprop="name">
            {% trans "Sujets chauds" %}
            <a href="{{url_forums}}">{% trans "Tous les forums" %}</a>
        </h2>

        <meta itemprop="itemListOrder" content="Descending">

        {% for topic in last_topics %}
            {% include 'forum/includes/topic_item.part.html' %}
        {% endfor %}
    </section>
{% endblock %}
